From a4691f453632be6594220aa92b7f5fa73ed27b5f Mon Sep 17 00:00:00 2001
From: Elliott Sales de Andrade <quantum.analyst@gmail.com>
Date: Sun, 3 Feb 2019 03:21:09 -0500
Subject: [PATCH 1/6] Allow building against external GTest with CMake.

(cherry picked from commit 7c9e460a4a8115553e6e4c71872bc2df1a45fb94)
---
 test/unit/CMakeLists.txt | 13 +++++++++++++
 1 file changed, 13 insertions(+)

diff --git a/test/unit/CMakeLists.txt b/test/unit/CMakeLists.txt
index d6f6b068..b8488629 100644
--- a/test/unit/CMakeLists.txt
+++ b/test/unit/CMakeLists.txt
@@ -1,5 +1,16 @@
 # CMake configuration for PROJ unit tests
 
+option(USE_EXTERNAL_GTEST "Compile against external GTest" OFF)
+
+if (USE_EXTERNAL_GTEST)
+
+message(STATUS "Using external GTest")
+find_package(GTest 1.8.0)
+
+else (USE_EXTERNAL_GTEST)
+
+message(STATUS "Using internal GTest")
+
 # FIXME: Deal with our old-school CMakeLists.txt behaving badly
 set(_save_c_flags "${CMAKE_C_FLAGS}")
 set(_save_cxx_flags "${CMAKE_CXX_FLAGS}")
@@ -47,6 +58,8 @@ set(CMAKE_CXX_FLAGS "${_save_cxx_flags}")
 unset(_save_c_flags)
 unset(_save_cxx_flags)
 
+endif(USE_EXTERNAL_GTEST)
+
 #
 # Build PROJ unit tests
 #
-- 
2.17.1

